import{a as n,u as t,j as e}from"./index-YmJ5rGxO.js";import{r as i}from"./vendor-redux-FsoCpCcR.js";import{C as d,a as x,d as h,b,c as C}from"./card-C1Os2Jzs.js";import{B as o}from"./button-BZ__ZVvs.js";import{B as f}from"./badge-dOlDYKGI.js";import{B as R}from"./bell-DfbuyXmA.js";import{C as w}from"./check-circle-DBNZYrM2.js";import"./vendor-react-BGYP6dvN.js";import"./utils-Ckn0VQvi.js";import"./vendor-recharts-Bkxxru1U.js";import"./createLucideIcon-BRnZLpr8.js";function L(){const[r,c]=i.useState([]),[p,m]=i.useState(!0),[u,l]=i.useState(0);i.useEffect(()=>{j()},[]);const j=async()=>{m(!0);try{const s=await n.get("/admin/notifications");s.data.success&&(c(s.data.notifications||[]),l(s.data.unreadCount||0))}catch{t.error("Failed to fetch notifications")}finally{m(!1)}},N=async s=>{try{await n.patch(`/admin/notifications/${s}/read`),c(r.map(a=>a._id===s?{...a,isRead:!0}:a)),l(Math.max(0,u-1)),t.success("Notification marked as read")}catch{t.error("Failed to update notification")}},g=async()=>{try{await n.patch("/admin/notifications/read-all"),c(r.map(s=>({...s,isRead:!0}))),l(0),t.success("All notifications marked as read")}catch{t.error("Failed to update notifications")}},y=s=>{const a={PLAN_EXPIRY:"bg-orange-500",JOB_UPDATE:"bg-blue-500",SUPPORT_RESPONSE:"bg-green-500",SYSTEM_ALERT:"bg-red-500",PAYMENT_REMINDER:"bg-yellow-500"};return e.jsx(f,{className:a[s]||"bg-gray-500",children:s.replace("_"," ")})};return p?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(d,{className:"animate-pulse",children:e.jsx(x,{className:"h-20 bg-muted rounded-lg"})},s))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with your business activities"})]}),u>0&&e.jsx(o,{onClick:g,variant:"outline",children:"Mark All as Read"})]}),r.length===0?e.jsx(d,{children:e.jsxs(h,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(R,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"})]})}):e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs(d,{className:s.isRead?"":"border-blue-500",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"text-lg",children:s.title}),y(s.type),!s.isRead&&e.jsx(f,{variant:"default",className:"bg-blue-500",children:"New"})]}),e.jsx(C,{children:new Date(s.createdAt).toLocaleString()})]}),!s.isRead&&e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>N(s._id),children:e.jsx(w,{className:"h-4 w-4"})})]})}),e.jsxs(h,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.message}),s.link&&e.jsx(o,{variant:"link",className:"mt-2 p-0",onClick:()=>window.location.href=s.link,children:"View Details â†’"})]})]},s._id))})]})}export{L as default};
