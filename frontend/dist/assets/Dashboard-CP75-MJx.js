import{a as x,u,j as e}from"./index-YmJ5rGxO.js";import{r}from"./vendor-redux-FsoCpCcR.js";import{C as l,a as c,b as j,c as g,d as p}from"./card-C1Os2Jzs.js";import{M as i,C as L}from"./MetricCard-BTkp3jse.js";import{B as o}from"./button-BZ__ZVvs.js";import{L as n}from"./vendor-react-BGYP6dvN.js";import{f as m}from"./currencyUtils-CJd_f-r_.js";import{P as y}from"./plus-BOAFu-8E.js";import{F as z,U as M,W as P}from"./wrench-W9WZu1Qp.js";import{C as J}from"./car-BlMH6bVL.js";import{C as H}from"./clock-DaivWXWn.js";import{c as h}from"./createLucideIcon-BRnZLpr8.js";import{R as f,B as U,C as b,X as v,Y as C,T as k,b as q,L as K,a as W}from"./vendor-recharts-Bkxxru1U.js";import"./utils-Ckn0VQvi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=h("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=h("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=h("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),a={bar:"#FF7A45",grid:"#E8ECF4"};function oe(){const[t,w]=r.useState(null),[T,R]=r.useState([]),[S,D]=r.useState([]),[d,B]=r.useState("USD"),[F,A]=r.useState(!0);r.useEffect(()=>{E()},[]),r.useEffect(()=>{x.get("/admin/settings").then(s=>{s.data?.success&&s.data.settings?.currency&&B(s.data.settings.currency)}).catch(()=>{})},[]);const E=async()=>{try{const s=await x.get("/admin/dashboard");s.data.success?(w(s.data.stats),R(s.data.jobsTrend||[]),D(s.data.revenueTrend||[])):u.error("Failed to fetch dashboard data")}catch(s){console.error("Failed to fetch dashboard data:",s),u.error(s.response?.data?.message||"Failed to fetch dashboard data")}finally{A(!1)}};return F||!t?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(s=>e.jsx(l,{className:"animate-pulse",children:e.jsx(c,{className:"h-20 bg-muted rounded-lg"})},s))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Welcome back! Here's what's happening today."})]}),e.jsx(n,{to:"/admin/jobs/new",className:"min-h-[44px] flex items-center",children:e.jsxs(o,{size:"lg",className:"gap-2 w-full sm:w-auto",children:[e.jsx(y,{className:"h-5 w-5"}),"New Job"]})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(i,{title:"Today's Jobs",value:t.todayJobs,subtitle:"Total jobs today",icon:z,iconBg:"orange",valueClassName:"text-primary"}),e.jsx(i,{title:"In Progress",value:t.inProgress,subtitle:"Cars being serviced",icon:J,iconBg:"blue"}),e.jsx(i,{title:"Avg Completion",value:`${t.avgCompletionTime} min`,subtitle:"Average time",icon:H,iconBg:"purple"}),e.jsx(i,{title:"Today's Revenue",value:m(t.todayRevenue,d),subtitle:"Revenue today",icon:N,iconBg:"orange",valueClassName:"text-primary"}),e.jsx(i,{title:"Monthly Revenue",value:m(t.monthlyRevenue,d),subtitle:"This month",icon:N,iconBg:"blue"}),e.jsx(i,{title:"Pending Deliveries",value:t.pendingDeliveries,subtitle:"Awaiting pickup",icon:M,iconBg:"red"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(n,{to:"/admin/jobs/new",children:e.jsxs(o,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),"New Job"]})}),e.jsx(n,{to:"/admin/jobs",children:e.jsxs(o,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"View All Jobs"]})}),e.jsx(n,{to:"/admin/customers",children:e.jsxs(o,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Customers"]})}),e.jsx(n,{to:"/admin/services",children:e.jsxs(o,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Services"]})}),e.jsx(n,{to:"/admin/my-plan",children:e.jsxs(o,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"My Plan"]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(j,{children:"Jobs (last 7 days)"}),e.jsx(g,{children:"Number of jobs per day"})]}),e.jsx(p,{children:e.jsx(f,{width:"100%",height:260,children:e.jsxs(U,{data:T,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(v,{dataKey:"date",tick:{fontSize:12},stroke:a.grid}),e.jsx(C,{allowDecimals:!1,stroke:a.grid}),e.jsx(k,{contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(q,{dataKey:"jobs",fill:a.bar,radius:[6,6,0,0]})]})})})]}),e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(j,{children:"Revenue (last 7 days)"}),e.jsx(g,{children:"Daily revenue"})]}),e.jsx(p,{children:e.jsx(f,{width:"100%",height:260,children:e.jsxs(K,{data:S,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(v,{dataKey:"date",tick:{fontSize:12},stroke:a.grid}),e.jsx(C,{tickFormatter:s=>s>=1e3?`${s/1e3}k`:s,stroke:a.grid}),e.jsx(k,{formatter:s=>[m(s,d),"Revenue"],contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(W,{type:"monotone",dataKey:"revenue",stroke:a.bar,strokeWidth:2,dot:{r:4}})]})})})]})]})]})}export{oe as default};
