import{a as o,u as l,j as e}from"./index-YmJ5rGxO.js";import{r}from"./vendor-redux-FsoCpCcR.js";import{C as n,a as d,b as c,c as u,d as h}from"./card-C1Os2Jzs.js";import{M as i,C as B}from"./MetricCard-BTkp3jse.js";import{f as w}from"./currencyUtils-CJd_f-r_.js";import{B as D}from"./building-2-DPCo_OCv.js";import{c as F}from"./createLucideIcon-BRnZLpr8.js";import{R as m,L as A,C as x,X as p,Y as g,T as j,a as L,B as K,b as M}from"./vendor-recharts-Bkxxru1U.js";import"./vendor-react-BGYP6dvN.js";import"./utils-Ckn0VQvi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),a={bar:"#FF7A45",grid:"#E8ECF4"};function q(){const[t,b]=r.useState(null),[y,v]=r.useState([]),[C,T]=r.useState([]),[k,N]=r.useState("USD"),[S,E]=r.useState(!0);r.useEffect(()=>{R()},[]),r.useEffect(()=>{o.get("/super-admin/settings").then(s=>{s.data?.success&&s.data.settings?.defaultCurrency&&N(s.data.settings.defaultCurrency)}).catch(()=>{})},[]);const R=async()=>{try{const s=await o.get("/super-admin/dashboard");s.data.success?(b(s.data.stats),v(s.data.revenueTrend||[]),T(s.data.onboardingTrend||[])):l.error("Failed to load dashboard data")}catch(s){console.error("Failed to fetch dashboard data:",s),l.error(s.response?.data?.message||"Failed to fetch dashboard data")}finally{E(!1)}};return S||!t?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(s=>e.jsx(n,{className:"animate-pulse",children:e.jsx(d,{className:"h-20 bg-muted rounded-lg"})},s))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Overview of your platform"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(i,{title:"Total Car Washes",value:t.totalBusinesses,subtitle:"Active businesses",icon:D,iconBg:"orange",valueClassName:"text-primary"}),e.jsx(i,{title:"Active Subscriptions",value:t.activePlans,subtitle:"Currently active",icon:B,iconBg:"blue"}),e.jsx(i,{title:"Expired Subscriptions",value:t.expiredPlans,subtitle:"Need renewal",icon:f,iconBg:"purple"}),e.jsx(i,{title:"Monthly Revenue",value:w(t.monthlyRevenue,k),subtitle:"This month",icon:f,iconBg:"orange",valueClassName:"text-primary"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Revenue Trend"}),e.jsx(u,{children:"Monthly revenue over time"})]}),e.jsx(h,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(A,{data:y,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(p,{dataKey:"month",stroke:a.grid}),e.jsx(g,{stroke:a.grid}),e.jsx(j,{contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(L,{type:"monotone",dataKey:"revenue",stroke:a.bar,strokeWidth:2,dot:{r:4}})]})})})]}),e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Subscription Growth"}),e.jsx(u,{children:"New businesses over time"})]}),e.jsx(h,{children:e.jsx(m,{width:"100%",height:300,children:e.jsxs(K,{data:C,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:a.grid}),e.jsx(p,{dataKey:"month",stroke:a.grid}),e.jsx(g,{stroke:a.grid}),e.jsx(j,{contentStyle:{borderRadius:12,border:"1px solid #E8ECF4"}}),e.jsx(M,{dataKey:"count",fill:a.bar,radius:[6,6,0,0]})]})})})]})]})]})}export{q as default};
