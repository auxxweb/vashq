import{a as p,u as l,j as e}from"./index-YmJ5rGxO.js";import{r}from"./vendor-redux-FsoCpCcR.js";import{C as v,d as f,a as Q,b as V}from"./card-C1Os2Jzs.js";import{B as n}from"./button-BZ__ZVvs.js";import{I as o}from"./input-lKSy0GOu.js";import{L as c}from"./label-C0QsUGTD.js";import{D as E,e as W,a as q,b as I,c as z,d as L}from"./dialog-DioR_SNv.js";import{p as O}from"./formUtils-CjVQbo5F.js";import{f as X}from"./currencyUtils-CJd_f-r_.js";import{P as Y}from"./plus-BOAFu-8E.js";import{S as U}from"./search-yXlgkkGt.js";import{P as ee}from"./pen-square-DESXZr50.js";import{T as se}from"./trash-2-CyIO3SZl.js";import{C as ae,a as ie}from"./chevron-right-Uxjaubls.js";import"./vendor-react-BGYP6dvN.js";import"./utils-Ckn0VQvi.js";import"./vendor-recharts-Bkxxru1U.js";import"./createLucideIcon-BRnZLpr8.js";const T=12;function Se(){const[x,M]=r.useState([]),[b,w]=r.useState(!0),[m,y]=r.useState(""),[D,N]=r.useState(""),[d,u]=r.useState(1),[h,_]=r.useState({total:0,totalPages:0}),[K,R]=r.useState("USD"),[$,S]=r.useState(!1),[B,g]=r.useState(!1),[F,C]=r.useState(null),[a,t]=r.useState({name:"",price:0,minTime:30,maxTime:60,description:"",isActive:!0});r.useEffect(()=>{j()},[m,d]),r.useEffect(()=>{p.get("/admin/settings").then(s=>{s.data?.success&&s.data.settings?.currency&&R(s.data.settings.currency)}).catch(()=>{})},[]);const j=async()=>{w(!0);try{const s=new URLSearchParams;s.set("page",String(d)),s.set("limit",String(T)),m.trim()&&s.set("search",m.trim());const i=await p.get(`/admin/services?${s.toString()}`);i.data.success?(M(i.data.services||[]),i.data.pagination&&_({total:i.data.pagination.total,totalPages:i.data.pagination.totalPages})):l.error("Failed to load services")}catch(s){console.error("Failed to load services:",s),l.error(s.response?.data?.message||"Failed to load services")}finally{w(!1)}},A=s=>{s?.preventDefault(),y(D),u(1)},P=s=>{s<1||s>h.totalPages||u(s)},H=async s=>{s.preventDefault();try{(await p.post("/admin/services",a)).data.success?(l.success("Service created successfully!"),S(!1),k(),j()):l.error("Failed to create service")}catch(i){console.error("Create service error:",i),l.error(i.response?.data?.message||"Failed to create service")}},G=async s=>{if(s.preventDefault(),!!F)try{(await p.put(`/admin/services/${F._id}`,a)).data.success?(l.success("Service updated successfully!"),g(!1),C(null),k(),j()):l.error("Failed to update service")}catch(i){console.error("Update service error:",i),l.error(i.response?.data?.message||"Failed to update service")}},Z=s=>{C(s),t({name:s.name,price:s.price,minTime:s.minTime,maxTime:s.maxTime,description:s.description||"",isActive:s.isActive!==!1}),g(!0)},J=async s=>{if(confirm("Are you sure you want to delete this service?"))try{(await p.delete(`/admin/services/${s}`)).data.success?(l.success("Service deleted successfully!"),j()):l.error("Failed to delete service")}catch(i){console.error("Delete service error:",i),l.error(i.response?.data?.message||"Failed to delete service")}},k=()=>{t({name:"",price:0,minTime:30,maxTime:60,description:"",isActive:!0})};return b?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your services"})]}),e.jsxs(E,{open:$,onOpenChange:S,children:[e.jsx(W,{asChild:!0,children:e.jsxs(n,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Add Service"]})}),e.jsxs(q,{children:[e.jsxs(I,{children:[e.jsx(z,{children:"Create New Service"}),e.jsx(L,{children:"Add a new service to your catalog"})]}),e.jsxs("form",{onSubmit:H,onKeyDown:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Service Name *"}),e.jsx(o,{id:"name",value:a.name,onChange:s=>t({...a,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"price",children:"Price *"}),e.jsx(o,{id:"price",type:"number",step:"0.01",min:"0",value:a.price,onChange:s=>t({...a,price:parseFloat(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"minTime",children:"Min Time (min) *"}),e.jsx(o,{id:"minTime",type:"number",min:"1",value:a.minTime,onChange:s=>t({...a,minTime:parseInt(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"maxTime",children:"Max Time (min) *"}),e.jsx(o,{id:"maxTime",type:"number",min:"1",value:a.maxTime,onChange:s=>t({...a,maxTime:parseInt(s.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:s=>t({...a,isActive:s.target.checked}),className:"h-4 w-4"}),e.jsx(c,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(n,{type:"submit",children:"Create Service"})]})]})]})]}),e.jsx(E,{open:B,onOpenChange:g,children:e.jsxs(q,{children:[e.jsxs(I,{children:[e.jsx(z,{children:"Edit Service"}),e.jsx(L,{children:"Update service details"})]}),e.jsxs("form",{onSubmit:G,onKeyDown:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-name",children:"Service Name *"}),e.jsx(o,{id:"edit-name",value:a.name,onChange:s=>t({...a,name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-price",children:"Price *"}),e.jsx(o,{id:"edit-price",type:"number",step:"0.01",min:"0",value:a.price,onChange:s=>t({...a,price:parseFloat(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-minTime",children:"Min Time (min) *"}),e.jsx(o,{id:"edit-minTime",type:"number",min:"1",value:a.minTime,onChange:s=>t({...a,minTime:parseInt(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-maxTime",children:"Max Time (min) *"}),e.jsx(o,{id:"edit-maxTime",type:"number",min:"1",value:a.maxTime,onChange:s=>t({...a,maxTime:parseInt(s.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-description",children:"Description"}),e.jsx(o,{id:"edit-description",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"edit-isActive",checked:a.isActive,onChange:s=>t({...a,isActive:s.target.checked}),className:"h-4 w-4"}),e.jsx(c,{htmlFor:"edit-isActive",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{g(!1),C(null)},children:"Cancel"}),e.jsx(n,{type:"submit",children:"Update Service"})]})]})]})})]}),e.jsx(v,{children:e.jsx(f,{className:"p-6",children:e.jsx("form",{onSubmit:A,className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-1 items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(o,{placeholder:"Search by name or description...",value:D,onChange:s=>N(s.target.value),onKeyDown:s=>s.key==="Enter"&&A(s),className:"pl-9"})]}),e.jsx(n,{type:"submit",variant:"secondary",size:"icon",className:"shrink-0 h-10 w-10",title:"Search",children:e.jsx(U,{className:"h-4 w-4"})}),m&&e.jsx(n,{type:"button",variant:"ghost",size:"sm",onClick:()=>{y(""),N(""),u(1)},children:"Clear"})]})})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[x.length===0&&!b&&e.jsx(v,{className:"md:col-span-2 lg:col-span-3",children:e.jsxs(f,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:m?"No services match your search.":"No services yet. Add your first service to get started."}),m&&e.jsx(n,{className:"mt-4",variant:"outline",onClick:()=>{y(""),N(""),u(1)},children:"Clear search"})]})}),x.map(s=>e.jsxs(v,{children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(V,{children:s.name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>Z(s),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>J(s._id),children:e.jsx(se,{className:"h-4 w-4"})})]})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:X(s.price,K)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.minTime," - ",s.maxTime," minutes"]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})})]},s._id))]}),h.totalPages>1&&e.jsx(v,{children:e.jsx(f,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",x.length===0?0:(d-1)*T+1,"â€“",(d-1)*T+x.length," of ",h.total]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>P(d-1),disabled:d<=1,children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("span",{className:"text-sm px-2",children:["Page ",d," of ",h.totalPages]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>P(d+1),disabled:d>=h.totalPages,children:["Next",e.jsx(ie,{className:"h-4 w-4 ml-1"})]})]})]})})})]})}export{Se as default};
